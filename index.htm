<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1.0"
  >
  <title>Assistonnes - 88 Key Piano</title>
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#000000">
  <style>
    .fs-btn {
      position: fixed;
      top: 8px;
      right: 8px;
      z-index: 9999;
      font-size: 14px;
      padding: 6px 10px;
      border-radius: 6px;
      border: 1px solid #444;
      background: #111;
      color: #fff;
      opacity: 0.85;
    }

    .fs-btn:active {
      opacity: 1;
    }
  </style>
</head>
<body>

  <!-- Fullscreen controls -->
  <button id="fullscreenBtn" class="fs-btn" hidden>
    ⛶ Fullscreen
  </button>

  <button id="exitFullscreenBtn" class="fs-btn" hidden>
    ✕ Exit
  </button>

  <!-- Your existing scripts -->
  <script src="piano.js"></script>
  <script src="staff.js"></script>
  <script src="scale.js"></script>

  <!-- Fullscreen + orientation logic -->
  <script>
    const fsBtn = document.getElementById('fullscreenBtn');
    const exitBtn = document.getElementById('exitFullscreenBtn');

    function isMobilePortrait() {
      return window.innerWidth < window.innerHeight;
    }

    async function enterFullscreen() {
      if (document.documentElement.requestFullscreen) {
        await document.documentElement.requestFullscreen();
      }

      if (screen.orientation?.lock) {
        try {
          await screen.orientation.lock('landscape');
        } catch {
          // silently ignore (iOS etc.)
        }
      }
    }

    async function exitFullscreen() {
      if (document.exitFullscreen) {
        await document.exitFullscreen();
      }
    }

    function updateButtons() {
      const isFS = !!document.fullscreenElement;

      // Show fullscreen button only on mobile portrait & not fullscreen
      fsBtn.hidden = isFS || !isMobilePortrait();

      // Show exit button only while fullscreen
      exitBtn.hidden = !isFS;
    }

    fsBtn.addEventListener('click', enterFullscreen);
    exitBtn.addEventListener('click', exitFullscreen);

    document.addEventListener('fullscreenchange', updateButtons);
    window.addEventListener('resize', updateButtons);

    updateButtons();
  </script>
<script>
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('/service-worker.js', { scope: '/' });
  }
</script>
</body>
</html>